cmake_minimum_required(VERSION 3.0)
cmake_policy(SET CMP0076 NEW)
project(GameofLife)
add_subdirectory(console)
add_subdirectory(game)


set (SRC main.c)

add_executable(${PROJECT_NAME} "")
target_sources(${PROJECT_NAME} PUBLIC ${SRC})
target_link_libraries(${PROJECT_NAME} PUBLIC game console) 
add_custom_target(dist tar -czvf GameofLife.tar.gz ../../GameofLife)
find_package(Doxygen)

if (DOXYGEN_FOUND)
    message("Building doc")

    add_custom_target(doc ALL
            COMMAND ${DOXYGEN_EXECUTABLE} ${DOXYGEN_OUT}
            WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
            COMMENT "Running Doxygen"
            VERBATIM)
else (DOXYGEN_FOUND)
    message("Doxygen was not found on this system, skipping doc build")
endif (DOXYGEN_FOUND)
install(TARGETS ${PROJECT_NAME})

